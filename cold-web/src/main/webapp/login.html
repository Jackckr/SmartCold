<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>冷库360-登录-冷库能效在线管理系统</title>
	<meta charset="utf-8" name="keywords" content="冷库360,冷库监控,冷库智能管理,冷库能效评估，冷库认证与能耗管理"/>
	<meta charset="utf-8" name="description" content="冷库360-冷库能效在线管理系统"/>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
<link rel="stylesheet" href="assets/fonts/iconfont.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="assets/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="assets/css/AdminLTE.min.css">
    <!-- iCheck -->
    <link rel="stylesheet" href="assets/plugins/iCheck/square/blue.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>	
	    .iconfont{
		    font-family:"iconfont" !important;
		    font-size:16px;font-style:normal;
		    -webkit-font-smoothing: antialiased;
		    -webkit-text-stroke-width: 0.2px;
		    -moz-osx-font-smoothing: grayscale;
		}
    	.login_new{
    		background: #fff;
    		font-family: "微软雅黑", Microsoft YaHei, Helvetica, '宋体',Tahoma, Arial, sans-serif;
    	}
    	.loginDiv{
    		width:100%;
    		text-align:left;
		    border-bottom:3px solid #ddd;
    	}
    	.loginDiv h2,.loginBody,.loginCopyR{
    		width:90%;
    		margin:0 auto;
    	}
    	.loginDiv h2{
    		height:75px;
    		line-height: 75px;
    		font-family: "微软雅黑", Microsoft YaHei, Helvetica, '宋体',Tahoma, Arial, sans-serif;
    	}
    	.loginBody{
    		min-height:500px;
    		margin:20px auto;  
    		background: url(assets/img/login_bg.png) no-repeat center;	
    		background-size:cover;	
    		text-align: right;
    	}
    	.loginCopyR{
    		text-align: right;
    	}
    	.loginArea{
    		display:inline-block;
    		width: 325px;
    		height: 360px;
    		border:1px solid #dbdbdb;
    		background: rgba(255,255,255,.6);
    		margin: 90px 90px 0 0;
    		padding: 50px 20px 0;
    		box-sizing:border-box;
    	}
    	.userinfo{
    		position: relative; 
    		margin-bottom: 20px;   		
    	}
    	.userinfo input{
    		width:100%;
    		text-indent: 2em;
    		border-radius:3px;
    		height: 40px;
    		line-height: 40px;
    		font-size:16px;
    		-webkit-appearance: none;
		    -moz-appearance: none;
		    appearance: none;
		    border: 1px solid #ccc;
		    box-shadow: 0 2px 3px 0 rgba(0,0,0,.1) inset;
		    -webkit-box-shadow: 0 2px 3px 0 rgba(0,0,0,.1) inset;
		    -moz-box-shadow: 0 2px 3px 0 rgba(0,0,0,.1) inset;
		    -ms-box-shadow: 0 2px 3px 0 rgba(0,0,0,.1) inset;
		    outline: none;
    	}
    	.userinfo input:focus{
    		border: 2px solid #428CCB;
    	}
    	.userinfo .icon{
    		position: absolute;
    		top:50%;
    		left:10px;
    		font-size:20px;
    		color: #999;
    		-webkit-transform:translateY(-50%);
    		-moz-transform:translateY(-50%);
    		-ms-transform:translateY(-50%);
    		-o-transform:translateY(-50%);
    		transform:translateY(-50%);
    	}
    	.loginArea .clearfix{
    		margin: 40px 0 0;
    	}
    	.loginArea .clearfix a{
    		color:#666;
    	}
    	.noM{
    		margin: 0;
    	}
    	.loginBtn{
    		padding: 0;
    	}
    	.loginBtn .btn{
    		padding-top:8px;
    		padding-bottom:8px;
    		border-radius:3px;
    	}
    	@media screen and (min-width: 1367px) { 
	    	.loginArea{
	    		width:360px;
	    		height: 430px;
	    		margin: 160px 280px 0 0;
	    	}
	    	.loginArea .clearfix{
	    		margin: 80px 0 0;
	    	}
		 }
    </style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body class="hold-transition login-page login_new">
  <!-- new login -->
  	<div class="loginDiv">
  		<h2>冷库360在线管理系统</h2>
  	</div>
  	<div class="loginBody login-box">
  		<div class="loginArea">
	        <div class="userinfo">
	        	<i class="icon iconfont">&#xe6be;</i>
				<input type="text" id="username" placeholder="用户名">
	        </div>
	        <div class="userinfo">
	        	<i class="icon iconfont">&#xe6c1;</i>
	            <input type="password" id="password"  placeholder="密码">
	        </div>
	        <div class="row">
		         <div class="col-xs-12" style="text-align: left;height: 30px;font-size: 12px;">
		           <a style="color:red" hidden=true id="mention"></a>
		         </div>
	         </div>
	        <div class="clearfix">
	        	<p class="pull-left"><a href="#">忘记密码</a></p>
	        	<p class="pull-right"><a href="register.html">免费注册</a></p>
	        </div>
	        <div class="row noM">
		         <div class="col-xs-12 col-lg-12">
		           <div class="checkbox icheck">
		           </div>
		         </div>
		         <div class="col-lg-12 loginBtn">
		           <button  id="submit" onclick="login();" class="btn btn-primary btn-block btn-flat">登录</button>
		         </div>
		     </div>
  		</div>
  	</div>
  	<div class="loginCopyR">
  		<p>&copy;2016&nbsp;Smartcold&nbsp;&nbsp;&nbsp;&nbsp;沪ICP备 16004753&nbsp;&nbsp;&nbsp;&nbsp;中物联冷链委官方推荐</p>
  	</div>
  <!-- new login end -->
	
<!-- jQuery 2.1.4 -->
<script src="assets/plugins/jQuery/jQuery-2.1.4.min.js"></script>
<script type="text/javascript">
	var mainHeight = $(window).height();
	$(".loginBody").height(mainHeight-160);
    window.onresize = function(){
    	var mainHeight = $(window).height();
    	$(".loginBody").height(mainHeight-160);
    }
	function showErrorInfo(msg) {
	    var msgEl = $("#mention");
	    if (msg == null || msg == '') {
	        msgEl.hide();
	        msgEl.html('');
	    } else {
	        msgEl.show();
	        msgEl.html(msg);
	    }
	}
	function login() {
	    var me = "#submit";
	    if ($(me).data('isLoading') === true) return; //防止再次点击登录
	    showErrorInfo("");
	    userName = $("#username").val();
	    password = $("#password").val();
	    if (userName == '') {
	        showErrorInfo("用户名不能为空！");
	        $("#username").focus();
	        return;
	    } else if (password == '') {
	        showErrorInfo("密码不能为空！");
	         $("#password").focus();
	        return;
	    }
	    $(me).text("登录中...");
	    $(me).data('isLoading', true);
	       $.ajax({
				type : "POST",
				dataType : "json",
				url : "/i/user/login",
				data : {userName : userName,password : password},
				complete : function(e){$(me).text("登录"); $(me).delay(500).data('isLoading',false);},
				success : function(data) {
					if (data.status == 0) {
                        document.cookie = data.message;
                        /*暂时注释*/
						/* if (window.location.hash != "") {
							backUrl = window.location.hash;
						} else {
							backUrl = "#/cold360Physical";
						}
						window.location.href = "http://"+ window.location.host + "/"+ backUrl;
						window.Event.returnValue = false; */
						
                        if (window.location.hash != "") {
							backUrl = window.location.hash;
							window.location.href = "http://"+ window.location.host + "/"+ backUrl;
						} else {
							//backUrl = "#/home";
							window.location.href="http://"+ window.location.host + "/home.html"
						}
						
						window.Event.returnValue = false;
					} else {
					    $("#mention")[0].hidden = false;
						showErrorInfo(data.message);
					}
				}
			});
	    
	};
	$(document).on({
	    keyup: function(e) {
	        if (e.keyCode == '13') {
	            login();
	        }
	    }
	});

</script>

  </body>
</html>
