<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>冷库360-冷库能效在线管理系统</title>
	<meta charset="utf-8" name="keywords" content="冷库360,冷库监控,冷库智能管理,冷库能效评估，冷库认证与能耗管理" />
	<meta charset="utf-8" name="description" content="冷库360-冷库能效在线管理系统" />
	<!-- Tell the browser to be responsive to screen width -->
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<link rel="shortcut icon" href="assets/img/favicon.ico" />
	<!-- Bootstrap 3.3.5 -->
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/plugins/select2/select2.min.css">
	<link rel="stylesheet" href="assets/plugins/jquery-step/css/jquery.step.css">
</head>
<body ng-app="app" ng-controller="loginStep">
	<div class="step-body" id="myStep">

		<div class="step-header" style="width:80%">
			<ul class="clearfix">
				<li><p class="roleName">角色选择</p></li>
				<li><p>冷库认证</p></li>
				<li><p>完成,等待审核</p></li>
			</ul>
		</div>
		<div class="step-content">
			<div class="step-list btn_c">
				<p class="btn_p" val="3"><button type="button" class="btn btn-primary btn-lg">我是冷库主</button>       </p>
				<p class="btn_p" val="2"><button type="button" class="btn btn-warning btn-lg">我是货主</button>         </p>
				<p class="btn_p" val="4"><button type="button" class="btn btn-success btn-lg">我是维修商</button>       </p>
			</div>
			<div class="step-list">
				<div class="coldDiv">
					<p>说明：如果您有冷库，请找到您的冷库进行认证；否则，请先添加冷库！</p>
					 <select id="rdcShow" class="select_gallery" style="width:100%;">

			        </select>
					<div class="clearfix btn_c">
						<span class="btn_prep bp"><button type="button"
								class="btn btn-warning">上一步</button></span> <span class="btn_back bp"><button
								type="button" class="btn btn-success" id="attestationRdc">下一步</button></span> <span
							class="bp"><button type="button" onclick="$('.addRdc').show()" id="addRdc" class="btn btn-primary">添加冷库</button></span>
					</div>
					
					
					
					<div class="addRdc black">
						<div class="row">
							<div class="col-lg-8 col-lg-offset-1">
								<form class="form-horizontal" name="rdcForm">
									<div class="form-group rdc">
										<label class="col-sm-4 control-label">名称：<em>*</em></label>
										<div class="col-sm-8">
											<input class="form-control" type="text" ng-model="name"
												ng-disabled="editable" name="name"
												ng-remote-validate="/i/rdc/checkName"
												ng-remote-method="GET"> <em
												ng-show="rdcForm.name.$error.ngRemoteValidate">冷库名已经被注册</em>
										</div>
									</div>

									<div class="form-group rdc">
										<label class="col-sm-4 control-label">省：<em>*</em></label>
										<div class="col-sm-8">
											<select class="form-control" ng-model="provinceId"
												ng-disabled="editable"
												ng-change="provinceSelected(provinceId)"
												ng-options="x.provinceId as x.provinceName for x in provinces"></select>
										</div>
									</div>

									<div class="form-group rdc">
										<label class="col-sm-4 control-label">市：<em>*</em></label>
										<div class="col-sm-8">
											<select class="form-control" ng-model="cityId"
												ng-disabled="editable" ng-change="citySelected(cityId)"
												ng-options="x.cityID as x.cityName for x in citys"></select>
										</div>
									</div>

									<div class="form-group rdc">
										<label class="col-sm-4 control-label">地理位置：<em>*</em></label>
										<div class="col-sm-8">
											<input class="form-control" type="text" ng-model="address">
										</div>
									</div>

									<div class="form-group rdc">
										<label class="col-sm-4 control-label">面积：<em>*</em></label>
										<div class="col-sm-8">
											<input class="form-control" placeholder="冷库面积（平方米）"
												type="number" name="area" ng-model="area"
												ng-remote-validate="/i/rdc/checkArea"
												ng-remote-method="GET"> <em
												ng-show="rdcForm.area.$error.ngRemoteValidate">请输入正确的数字，单位为（平方米）</em>
										</div>
									</div>

									<div class="form-group rdc">
										<label class="col-sm-4 control-label">冷库经营类型：<em>*</em></label>
										<div class="col-sm-8">
											<select class="form-control" ng-model="manageType"
												ng-change="ManageTypeSelected(manageType)"
												ng-options="x.id as x.type for x in manageTypes"></select>
										</div>
									</div>

									<div class="form-group rdc">
										<label class="col-sm-4 control-label">商品存放类型：<em>*</em></label>
										<div class="col-sm-8">
											<select class="form-control" ng-model="storageType"
												ng-change="StorageTypeSelected(storageType)"
												ng-options="x.id as x.type for x in storageTypes"></select>
										</div>
									</div>

									<div class="form-group rdc">
										<label class="col-sm-4 control-label">冷库温度类型：<em>*</em></label>
										<div class="col-sm-8">
											<select class="form-control" ng-model="temperType"
												ng-change="TemperTypeSelected(temperType)"
												ng-options="x.id as x.type for x in temperTypes"></select>
										</div>
									</div>

									<div class="form-group minInput">
										<label class="col-sm-4 control-label">冷藏车数量：</label>
										<div class="col-sm-8">
											<div>
												<div class="col-sm-12 input-group">
													<span class="input-group-addon">＜1.8T</span> <input
														class="form-control" type="number" ng-model="coldTruck1">
													<span class="input-group-addon">辆</span> <span
														class="input-group-addon">1.8～6T</span> <input
														class="form-control" type="number" ng-model="coldTruck2">
													<span class="input-group-addon">辆</span>
												</div>
											</div>
											<br />

											<div>
												<div class="col-sm-12 input-group">
													<span class="input-group-addon">6～14T</span> <input
														class="form-control" type="number" ng-model="coldTruck3">
													<span class="input-group-addon">辆</span> <span
														class="input-group-addon">＞14T</span> <input
														class="form-control" type="number" ng-model="coldTruck4">
													<span class="input-group-addon">辆</span>
												</div>
											</div>
											<div style="width: 400px"></div>
										</div>
									</div>

									<div class="form-group rdc">
										<label class="col-sm-4 control-label">联系电话：<em>*</em></label>
										<div class="col-sm-8">
											<input class="form-control" type="text" name="phoneNum"
												ng-model="phoneNum">
										</div>
									</div>

									<div class="form-group rdc">
										<label class="col-sm-4 control-label">备注：</label>
										<div class="col-sm-8">
											<textarea class="form-control" type="text" ng-model="remark"
												name="remark" ng-remote-validate="/i/rdc/checkRemark"
												ng-remote-method="GET">
				                        </textarea>
											<em ng-show="rdcForm.remark.$error.ngRemoteValidate">备注不能超过250个字符</em>
										</div>
									</div>
								</form>
							</div>

							<div class="col-lg-8 col-lg-offset-1">
								<div class="addMore text-right">
									<a href="javascript:;" onclick="addMore()">添加更多...</a>
								</div>
							</div>

							<div class="row moreInfo black">
								<div class="col-lg-8 col-lg-offset-1">
									<form class="form-horizontal">

										<div class="form-group rdc">
											<label class="col-sm-4 control-label">建筑结构：</label>
											<div class="col-sm-8">
												<select class="form-control" ng-model="structure"
													ng-options="x.id as x.type for x in structures"></select>
											</div>
										</div>

										<div class="form-group rdc">
											<label class="col-sm-4 control-label">是否有封闭月台：</label>
											<div class="col-sm-8">
												<select class="form-control" ng-model="platform"
													ng-options="x.id as x.name for x in haveOrNots"></select>
											</div>
										</div>

										<div class="form-group rdc">
											<label class="col-sm-4 control-label">是否有理货区：</label>
											<div class="col-sm-8">
												<select class="form-control" ng-model="lihuoRoom"
													ng-change="ChangLihuoState(lihuoRoom)"
													ng-options="x.id as x.name for x in haveOrNots"></select>
											</div>
										</div>

										<div class="form-group rdc">
											<label class="col-sm-4 control-label">理货区面积：</label>
											<div class="col-sm-8">
												<input class="form-control" type="number"
													ng-model="lihuoArea">
											</div>
										</div>

										<div class="form-group rdc">
											<label class="col-sm-4 control-label">理货区有无温控：</label>
											<div class="col-sm-8">
												<select class="form-control" ng-model="lihuoTemperCtr"
													ng-options="x.id as x.name for x in haveOrNots"></select>
											</div>
										</div>

										<div class="form-group rdc">
											<label class="col-sm-4 control-label">制冷剂类型：</label>
											<div class="col-sm-8">
												<select class="form-control" ng-model="storageRefreg"
													ng-change="StorageRefregSelected(storageRefreg)"
													ng-options="x.id as x.type for x in storageRefregs"></select>
											</div>
										</div>

										<div class="form-group rdc">
											<label class="col-sm-4 control-label">有无温度记录：</label>
											<div class="col-sm-8">
												<select class="form-control" ng-model="temperRecord"
													ng-options="x.id as x.name for x in haveOrNots"></select>
											</div>
										</div>

										<div class="form-group minInput myAddon">
											<label class="col-sm-4 control-label">冷库容积：</label>
											<div class="col-sm-8">
												<div class="col-sm-12 input-group">
													<span class="input-group-addon">12~25℃</span> <input
														class="form-control" type="number" ng-model="capacity1">
													<span class="input-group-addon">面积㎡</span> <input
														class="form-control" type="number" ng-model="height1">
													<span class="input-group-addon">高m</span>
												</div>
												<br />
												<div class="col-sm-12 input-group">
													<span class="input-group-addon">12~-2℃</span> <input
														class="form-control" type="number" ng-model="capacity2">
													<span class="input-group-addon">面积㎡</span> <input
														class="form-control" type="number" ng-model="height2">
													<span class="input-group-addon">高m</span>
												</div>
												<br />
												<div class="col-sm-12 input-group">
													<span class="input-group-addon">-15~-22℃</span> <input
														class="form-control" type="number" ng-model="capacity3">
													<span class="input-group-addon">面积㎡</span> <input
														class="form-control" type="number" ng-model="height3">
													<span class="input-group-addon">高m</span>
												</div>
												<br />
												<div class="col-sm-12 input-group">
													<span class="input-group-addon">-22~-30℃</span> <input
														class="form-control" type="number" ng-model="capacity4">
													<span class="input-group-addon">面积㎡</span> <input
														class="form-control" type="number" ng-model="height4">
													<span class="input-group-addon">高m</span>
												</div>
												<br />
												<div class="col-sm-12 input-group">
													<span class="input-group-addon">&lt;-30℃</span> <input
														class="form-control" type="number" ng-model="capacity5">
													<span class="input-group-addon">面积㎡</span> <input
														class="form-control" type="number" ng-model="height5">
													<span class="input-group-addon">高m</span>
												</div>
												<div style="width: 400px"></div>
											</div>
										</div>

										<div class="form-group rdc">
											<label class="col-sm-4 control-label">周边设施：</label>
											<div class="col-sm-8">
												<textarea class="form-control" type="text"
													ng-model="facility"
													placeholder="交通、加油站、宾馆、银行、餐饮、距市区和高速的距离等.."></textarea>
											</div>
										</div>

										<div class="form-group rdc">
											<label class="col-sm-4 control-label">资质荣誉图：</label>
											<div class="col-sm-8">
												<div class="row">
													<div class="col-sm-2 divCSS">
														<a href="javascript:;" class="file">选择文件 <input
															type="file" ngf-select="addHonorFiles($files)"
															ng-model="honorfiles" ngf-multiple="true"
															name="honorfiles"></a>
													</div>
													<div class="col-sm-3 divCSS">
														<small class="text-warning" style="width: 100px">*最多八张</small>
													</div>
												</div>
											</div>
										</div>
										<div class="form-group" ng-if="honorPicShow.length>0"
											style="padding-left: 20%">
											<div class="pull-left" ng-repeat="item in honorPicShow"
												style="position:relative;padding:5px;width: 86px;height:48px;background-size:cover;">
												<img ng-src="{{item.location}}"
													style="width:100%;height:100%"
													ng-click="goPicDetail(item)" alt="" /> <i
													class="fa fa-times danger" aria-hidden="true"
													style="color:red;cursor: pointer;position:absolute;right:0;top:0"
													ng-click="deleteHonorPic(item)"></i>
											</div>
										</div>
										<div class="col-lg-12 col-lg-offset-2">
											<div class="form-group" style="padding-left: 20%">
												<div class="pull-left"
													ng-repeat="honorfile in totalhonorfiles"
													style="position:relative;padding:5px;width: 86px;height:48px;background-size:cover;">
													<img ngf-src="honorfile" title="{{honorfile}}"
														style="width:100%;height:100%" /> <i
														class="fa fa-times danger" aria-hidden="true"
														style="color:red;cursor: pointer;position:absolute;right:0;top:0"
														ng-click="drophonor(honorfile)"></i>
												</div>
											</div>
										</div>

										<div class="form-group rdc">
											<label class="col-sm-4 control-label">功能平面布置图：</label>
											<div class="col-sm-8">
												<form name="arrangeform" class="row">
													<div class="row">
														<div class="col-sm-2 divCSS">
															<a href="javascript:;" class="file">选择文件 <input
																type="file" ng-model="arrangePic" name="arrangePic"
																ngf-select="addArrangePic($files)">
															</a>
														</div>
														<div class="col-sm-3 divCSS">
															<small class="text-warning" style="width: 100px">*最多一张</small>
														</div>
														<div class="form-group col-sm-12">
															<div class="pull-left"
																ng-repeat="arrangePic in arrangePics"
																style="position:relative;padding:5px;width: 86px;height:48px;background-size:cover;">
																<img style="width: 100%;height:100%"
																	ngf-src="arrangePic" title="{{arrangePic.name}}" /> <i
																	class="fa fa-times danger" aria-hidden="true"
																	style="color:red;cursor: pointer;position:absolute;right:0;top:0"
																	ng-click="dropArrangePic(arrangePic)"></i>
															</div>
														</div>
												</form>
											</div>
										</div>
										<div class="form-group rdc" ng-if="arrangePicShow != null">
											<label class="col-sm-4 control-label"></label>
											<div class=""
												style="padding:5px;position:relative;display:inline-block">
												<img style="width: 86px;height:48px"
													ng-src="{{arrangePicShow.location}}"
													ng-click="goPicDetail(arrangePicShow)" alt="" /> <i
													class="fa fa-times danger" aria-hidden="true"
													style="color:red;cursor: pointer;position:absolute;right:0;top:0"
													ng-click="deletePic(arrangePicShow)"></i>
											</div>
										</div>

										<div class="form-group rdc">
											<label class="col-sm-4 control-label">冷库图片：</label>
											<div class="col-sm-8">
												<div class="row">
													<div class="col-sm-2 divCSS">
														<a href="javascript:;" class="file">选择文件 <input
															type="file" ngf-select="addFiles($files)"
															ng-model="files" ngf-multiple="true" name="files">
														</a>
													</div>
													<div class="col-sm-3 divCSS">
														<small class="text-warning" style="width: 100px">*最多五张</small>
													</div>
												</div>
											</div>
										</div>
										<div class="form-group" ng-if="storagePicShow.length>0"
											style="padding-left: 20%">
											<div class="pull-left" ng-repeat="item in storagePicShow"
												style="position:relative;padding:5px;width: 86px;height:48px;background-size:cover;">
												<img ng-src="{{item.location}}"
													style="width:100%;height:100%"
													ng-click="goPicDetail(item)" alt="" /> <i
													class="fa fa-times danger" aria-hidden="true"
													style="color:red;cursor: pointer;position:absolute;right:0;top:0"
													ng-click="deletePic(item)"></i>
											</div>
										</div>
										<div class="col-lg-12 col-lg-offset-2"
											style="padding-left: 20%">
											<div class="pull-left" ng-repeat="file in totalfiles"
												style="position:relative;padding:5px;width: 86px;height:48px;background-size:cover;">
												<img ngf-src="file" style="width:100%;height:100%" alt="" />
												<i class="fa fa-times danger" aria-hidden="true"
													style="color:red;cursor: pointer;position:absolute;right:0;top:0"
													ng-click="drop(file)"></i>
											</div>
										</div>
									</form>
								</div>
							</div>

						</div>
						<div class="col-lg-8 col-lg-offset-2 text-center">
							<button class="btn btn-primary mybtn" ng-click="submit()" style="width: 150px" ng-disabled="isDisabled">提交</button>
						</div>
					</div>
				</div>
				</div>
			</div>
			
			<div class="step-list">
				<div class="apply-finish text-center">
					<div class="apply-finish-header">
						<img src="assets/plugins/jquery-step/images/success.png">
						<p class="apply-finish-msg">恭喜您，提交成功！</p>
					</div>
					<div class="apply-finish-footer">
						<p>
							尊敬的用户，您已提交成功，受理编号为<span id="proNo">LS23423432</span>。
						</p>
						<p class="btn_p"><a href="login.html" class="btn btn-success">返回登录页</a>       </p>
					</div>
				</div>
			</div>

		</div>

	</div>
<!-- 	<button id="preBtn">上一步</button>
	<button id="nextBtn">下一步</button>
	<button id="goBtn">跳到步</button>  -->
	<script src="assets/plugins/jQuery/jQuery-2.1.4.min.js"></script>
	<script src="assets/plugins/select2/select2.min.js"></script>
	<script src="assets/plugins/jquery-step/js/jquery.step.js"></script>
	<script type="text/javascript">
		$(function () {
		    var roleType="";
            $("p[class=btn_p]").click(function () {
				 roleType = $(this).attr("val");
				 $.ajax({
                     type: "POST",
                     dataType: "json",
                     url: "/i/loginStep/getAllRdc",
                     success:function (data) {
                         var val = "";
                         for (var i=0;i<data.length;i++){
                             val+="<option value='"+data[i].id+"'>"+data[i].name+"</option>"
						 }
						 $("#rdcShow").empty().html(val);
                     }
				 })
            });
			$("#attestationRdc").click(function () {
				var $rdcShow = $("#rdcShow option:selected");
                $.ajax({
                    type: "POST",
					data:{
                        rdcId:$rdcShow.val(),
						roleType:roleType
					},
                    dataType: "json",
                    url: "/i/loginStep/attestationRdc",
					success:function (data) {

                    }
                })
            });
			$("#addRdc").click(function () {
				$.ajax({
					type:"post",
					url:"http://192.168.1.196:8080/i/user/findUser",
					data:sessionStorage.sikey,
					success:function (data) {
                        /*window.location.href="http://192.168.1.114:8080/#/coldStorageAdd";*/
                    }
				})
            })
        });
	$(function() {
		$(".select_gallery").select2();
		
		var step= $("#myStep").step({
			animate:true,
			initStep:1,
			speed:1000
		});
		$(".btn_prep>button").click(function(event) {
			var yes=step.preStep();//上一步
		});
		
		$(".btn_p>.btn").click(function(event) {
			var yes=step.nextStep();//下一步
			$(".roleName").html("角色选择--"+$(this).html())
		});
		$(".btn_back>.btn").click(function(event) {
			var yes=step.nextStep();//上一步
		});
		
		$("#goBtn").click(function(event) {
			var yes=step.goStep(3);//到指定步
		});
		
		$("#applyBtn").click(function(event) {
			var yes=step.nextStep();

		});
		$("#submitBtn").click(function(event) {
			var yes=step.nextStep();


		});
		$("#goBtn").click(function(event) {
			var yes=step.goStep(3);

		});
				
	});
		function addMore(){
			$(".moreInfo").toggle()
		}
	</script>
</body>
</html>
