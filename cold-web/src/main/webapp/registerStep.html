<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>冷库360-冷库能效在线管理系统</title>
    <meta charset="utf-8" name="keywords" content="冷库360,冷库监控,冷库智能管理,冷库能效评估，冷库认证与能耗管理" />
    <meta charset="utf-8" name="description" content="冷库360-冷库能效在线管理系统" />
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="shortcut icon" href="assets/img/favicon.ico" />
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/plugins/select2/select2.min.css">
    <link rel="stylesheet" href="assets/plugins/jquery-step/css/jquery.step.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="assets/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="assets/css/AdminLTE.min.css">
    <!-- iCheck -->
    <link rel="stylesheet" href="assets/plugins/iCheck/square/blue.css">
    <style type="text/css">
    	form>p{color:red;}
    	.registerDiv{width:400px;margin: 0 auto;}
    	.typeCold{margin-bottom: 10px;}
    	.typeCold .pull-left{width:20%;}
    	.typeCold .pull-left .checkbox-inline{padding-left: 0;}
    </style>
</head>
<body>
<div class="step-body" id="myStep">

    <div class="step-header" style="width:80%">
        <ul class="clearfix">
            <li><p>用户注册</p></li>
            <li><p class="roleName">角色选择</p></li>
            <li><p>冷库认证</p></li>
            <li><p>完成,等待审核</p></li>
        </ul>
    </div>
    <div class="step-content">
        <div class="step-list btn_c">
            <div class="registerDiv">
                <div class="register-logo">
                    <label>冷库360·SmartCold</label>
                </div>

                <div class="register-box-body">
                    <p class="login-box-msg">新用户注册</p>
                    <form action="../../index.html" method="post">
                        <div class="form-group has-feedback">
                            <input id="txt_username" type="text" class="form-control" placeholder="用户名" onblur="checkUserName()">
                            <span class="glyphicon glyphicon-user form-control-feedback"></span>
                        </div>
                        <p class="userMsg"></p>
                        <div class="form-group has-feedback">
                            <input id="txt_password" type="password" class="form-control" placeholder="密码" onchange="checkpwd()">
                            <span class="glyphicon glyphicon-lock form-control-feedback"></span>
                        </div>
                        <p class="psdMsg"></p>
                        <div class="form-group has-feedback">
                            <input  id="txt_refpassword" type="password" class="form-control" placeholder="重输密码" onchange="checkopwd()">
                            <span class="glyphicon glyphicon-log-in form-control-feedback"></span>
                        </div>
                        <p class="rePsdMsg"></p>
                        <div class="form-group has-feedback">
                            <input id="txt_telephone" type="text" class="form-control" placeholder="手机号" onchange="checktelephone()">
                            <span class="glyphicon glyphicon-earphone form-control-feedback" ></span>
                        </div>
                        <p class="telMsg"></p>
                        <div class="input-group form-group">
                            <input id="txt_vicode" type="text" class="form-control" placeholder="输入验证码" onchange="checkcode(this)">
                            <span id="sp_yzmbut" class="input-group-addon btn btn-primary" onclick="getviercode(this)">获取验证码</span>
                        </div>
                        <p class="codeMsg"></p>
                        <div class="clearfix typeCold">
                            <div style="width: 100%;">
                                <label>注册类型</label>
                            </div>
                            <div class="pull-left">
                                <label class="checkbox-inline">
                                    <input type="radio" name="coldType" value="3">温度版
                                </label>
                            </div>
                            <div class="pull-left">
                                <label class="checkbox-inline">
                                    <input type="radio" name="coldType" value="4">基本版
                                </label>
                            </div>
                            <div class="pull-left">
                                <label class="checkbox-inline">
                                    <input type="radio" name="coldType" value="5">聪慧版
                                </label>
                            </div>
                            <div class="pull-left">
                                <label class="checkbox-inline">
                                    <input type="radio" name="coldType" value="6" checked="checked">智能版
                                </label>
                            </div>
                            <div class="pull-left">
                                <label class="checkbox-inline">
                                    <input type="radio" name="coldType" value="2">维修版
                                </label>
                            </div>
                        </div>
                        <div>
                            <button id="submit" type="button" class="btn btn-primary btn-block btn-flat" disabled onclick="reguser()">注册</button>
                        </div>
                        <div class="text-right" style="margin-top: 10px;">
                            <a href="login.html">已经注册</a>
                        </div>
                    </form>

                    <div class="social-auth-links text-center">
                    </div>

                    <a href="login.html" class="text-center"></a>
                </div><!-- /.form-box -->
            </div>
        </div>
        <div class="step-list">
            <p class="btn_p" name="chooseRole" val="3"><button type="button" class="btn btn-primary btn-lg">我是冷库主</button>       </p>
            <p class="btn_p" name="chooseRole" val="2"><button type="button" class="btn btn-warning btn-lg">我是货主</button>         </p>
            <p class="btn_p" name="chooseRole" val="4"><button type="button" class="btn btn-success btn-lg">我是维修商</button>       </p>
            <p class="btn_p"><span class="btn_prep bp" style="float:none;">
            	<button type="button" class="btn btn-warning btn-lg" style="width: 300px;">上一步</button></span>
           	</p>
        </div>
        <div class="step-list">
            <div class="coldDiv">
                <p>说明：如果您有冷库，请找到您的冷库进行认证；否则，请先添加冷库！</p>
                <select id="rdcShow" class="select_gallery" style="width:100%;">

                </select>
                <div class="clearfix btn_c">
						<span class="btn_prep bp"><button type="button" class="btn btn-warning">上一步</button></span>
						<span class="btn_back bp"><button type="button" class="btn btn-success" id="attestationRdc">下一步</button></span>
						<span class="bp"><button type="button" onclick="$('.addRdc').show()" class="btn btn-primary">添加冷库</button></span>
                </div>
                <div class="addRdc black">
                    <div class="row">
                        <div class="col-lg-8 col-lg-offset-1">
                            <form class="form-horizontal" name="rdcForm">
                                <div class="form-group rdc">
                                    <label class="col-sm-4 control-label">名称：<em>*</em></label>
                                    <div class="col-sm-8">
                                        <input class="form-control" type="text" ng-model="name" value="{{name}}"
                                               ng-disabled="editable" name="name"
                                               ng-remote-validate="/i/rdc/checkName"
                                               ng-remote-method="GET"> <em
                                            ng-show="rdcForm.name.$error.ngRemoteValidate">冷库名已经被注册</em>
                                    </div>
                                </div>

                                <div class="form-group rdc">
                                    <label class="col-sm-4 control-label">省：<em>*</em></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" ng-model="provinceId"
                                                ng-disabled="editable"
                                                ng-change="provinceSelected(provinceId)"
                                                ng-options="x.provinceId as x.provinceName for x in provinces"></select>
                                    </div>
                                </div>

                                <div class="form-group rdc">
                                    <label class="col-sm-4 control-label">市：<em>*</em></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" ng-model="cityId"
                                                ng-disabled="editable" ng-change="citySelected(cityId)"
                                                ng-options="x.cityID as x.cityName for x in citys"></select>
                                    </div>
                                </div>

                                <div class="form-group rdc">
                                    <label class="col-sm-4 control-label">地理位置：<em>*</em></label>
                                    <div class="col-sm-8">
                                        <input class="form-control" type="text" ng-model="address" value="{{address}}">
                                    </div>
                                </div>

                                <div class="form-group rdc">
                                    <label class="col-sm-4 control-label">面积：<em>*</em></label>
                                    <div class="col-sm-8">
                                        <input class="form-control" placeholder="冷库面积（平方米）"
                                               type="number" name="area" ng-model="area"
                                               ng-remote-validate="/i/rdc/checkArea"
                                               ng-remote-method="GET"> <em
                                            ng-show="rdcForm.area.$error.ngRemoteValidate">请输入正确的数字，单位为（平方米）</em>
                                    </div>
                                </div>

                                <div class="form-group rdc">
                                    <label class="col-sm-4 control-label">冷库经营类型：<em>*</em></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" ng-model="manageType"
                                                ng-change="ManageTypeSelected(manageType)"
                                                ng-options="x.id as x.type for x in manageTypes"></select>
                                    </div>
                                </div>

                                <div class="form-group rdc">
                                    <label class="col-sm-4 control-label">商品存放类型：<em>*</em></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" ng-model="storageType"
                                                ng-change="StorageTypeSelected(storageType)"
                                                ng-options="x.id as x.type for x in storageTypes"></select>
                                    </div>
                                </div>

                                <div class="form-group rdc">
                                    <label class="col-sm-4 control-label">冷库温度类型：<em>*</em></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" ng-model="temperType"
                                                ng-change="TemperTypeSelected(temperType)"
                                                ng-options="x.id as x.type for x in temperTypes"></select>
                                    </div>
                                </div>

                                <div class="form-group minInput">
                                    <label class="col-sm-4 control-label">冷藏车数量：</label>
                                    <div class="col-sm-8">
                                        <div>
                                            <div class="col-sm-12 input-group">
                                                <span class="input-group-addon">＜1.8T</span> <input
                                                    class="form-control" type="number" ng-model="coldTruck1">
                                                <span class="input-group-addon">辆</span> <span
                                                    class="input-group-addon">1.8～6T</span> <input
                                                    class="form-control" type="number" ng-model="coldTruck2">
                                                <span class="input-group-addon">辆</span>
                                            </div>
                                        </div>
                                        <br />

                                        <div>
                                            <div class="col-sm-12 input-group">
                                                <span class="input-group-addon">6～14T</span> <input
                                                    class="form-control" type="number" ng-model="coldTruck3">
                                                <span class="input-group-addon">辆</span> <span
                                                    class="input-group-addon">＞14T</span> <input
                                                    class="form-control" type="number" ng-model="coldTruck4">
                                                <span class="input-group-addon">辆</span>
                                            </div>
                                        </div>
                                        <div style="width: 400px"></div>
                                    </div>
                                </div>

                                <div class="form-group rdc">
                                    <label class="col-sm-4 control-label">联系电话：<em>*</em></label>
                                    <div class="col-sm-8">
                                        <input class="form-control" type="text" name="phoneNum" value="{{phone}}"
                                               ng-model="phoneNum">
                                    </div>
                                </div>

                                <div class="form-group rdc">
                                    <label class="col-sm-4 control-label">备注：</label>
                                    <div class="col-sm-8">
											<textarea class="form-control" type="text" ng-model="remark"
                                                      name="remark" ng-remote-validate="/i/rdc/checkRemark"
                                                      ng-remote-method="GET" value="{{remark}}">
				                        </textarea>
                                        <em ng-show="rdcForm.remark.$error.ngRemoteValidate">备注不能超过250个字符</em>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div class="col-lg-8 col-lg-offset-1">
                            <div class="addMore text-right">
                                <a href="javascript:;" onclick="addMore()">添加更多...</a>
                            </div>
                        </div>

                        <div class="row moreInfo black">
                            <div class="col-lg-8 col-lg-offset-1">
                                <form class="form-horizontal">

                                    <div class="form-group rdc">
                                        <label class="col-sm-4 control-label">建筑结构：</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" ng-model="structure"
                                                    ng-options="x.id as x.type for x in structures"></select>
                                        </div>
                                    </div>

                                    <div class="form-group rdc">
                                        <label class="col-sm-4 control-label">是否有封闭月台：</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" ng-model="platform"
                                                    ng-options="x.id as x.name for x in haveOrNots"></select>
                                        </div>
                                    </div>

                                    <div class="form-group rdc">
                                        <label class="col-sm-4 control-label">是否有理货区：</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" ng-model="lihuoRoom"
                                                    ng-change="ChangLihuoState(lihuoRoom)"
                                                    ng-options="x.id as x.name for x in haveOrNots"></select>
                                        </div>
                                    </div>

                                    <div class="form-group rdc">
                                        <label class="col-sm-4 control-label">理货区面积：</label>
                                        <div class="col-sm-8">
                                            <input class="form-control" type="number"
                                                   ng-model="lihuoArea">
                                        </div>
                                    </div>

                                    <div class="form-group rdc">
                                        <label class="col-sm-4 control-label">理货区有无温控：</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" ng-model="lihuoTemperCtr"
                                                    ng-options="x.id as x.name for x in haveOrNots"></select>
                                        </div>
                                    </div>

                                    <div class="form-group rdc">
                                        <label class="col-sm-4 control-label">制冷剂类型：</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" ng-model="storageRefreg"
                                                    ng-change="StorageRefregSelected(storageRefreg)"
                                                    ng-options="x.id as x.type for x in storageRefregs"></select>
                                        </div>
                                    </div>

                                    <div class="form-group rdc">
                                        <label class="col-sm-4 control-label">有无温度记录：</label>
                                        <div class="col-sm-8">
                                            <select class="form-control" ng-model="temperRecord"
                                                    ng-options="x.id as x.name for x in haveOrNots"></select>
                                        </div>
                                    </div>

                                    <div class="form-group minInput myAddon">
                                        <label class="col-sm-4 control-label">冷库容积：</label>
                                        <div class="col-sm-8">
                                            <div class="col-sm-12 input-group">
                                                <span class="input-group-addon">12~25℃</span> <input
                                                    class="form-control" type="number" ng-model="capacity1">
                                                <span class="input-group-addon">面积㎡</span> <input
                                                    class="form-control" type="number" ng-model="height1">
                                                <span class="input-group-addon">高m</span>
                                            </div>
                                            <br />
                                            <div class="col-sm-12 input-group">
                                                <span class="input-group-addon">12~-2℃</span> <input
                                                    class="form-control" type="number" ng-model="capacity2">
                                                <span class="input-group-addon">面积㎡</span> <input
                                                    class="form-control" type="number" ng-model="height2">
                                                <span class="input-group-addon">高m</span>
                                            </div>
                                            <br />
                                            <div class="col-sm-12 input-group">
                                                <span class="input-group-addon">-15~-22℃</span> <input
                                                    class="form-control" type="number" ng-model="capacity3">
                                                <span class="input-group-addon">面积㎡</span> <input
                                                    class="form-control" type="number" ng-model="height3">
                                                <span class="input-group-addon">高m</span>
                                            </div>
                                            <br />
                                            <div class="col-sm-12 input-group">
                                                <span class="input-group-addon">-22~-30℃</span> <input
                                                    class="form-control" type="number" ng-model="capacity4">
                                                <span class="input-group-addon">面积㎡</span> <input
                                                    class="form-control" type="number" ng-model="height4">
                                                <span class="input-group-addon">高m</span>
                                            </div>
                                            <br />
                                            <div class="col-sm-12 input-group">
                                                <span class="input-group-addon">&lt;-30℃</span> <input
                                                    class="form-control" type="number" ng-model="capacity5">
                                                <span class="input-group-addon">面积㎡</span> <input
                                                    class="form-control" type="number" ng-model="height5">
                                                <span class="input-group-addon">高m</span>
                                            </div>
                                            <div style="width: 400px"></div>
                                        </div>
                                    </div>

                                    <div class="form-group rdc">
                                        <label class="col-sm-4 control-label">周边设施：</label>
                                        <div class="col-sm-8">
												<textarea class="form-control" type="text"
                                                          ng-model="facility"
                                                          placeholder="交通、加油站、宾馆、银行、餐饮、距市区和高速的距离等.."></textarea>
                                        </div>
                                    </div>

                                    <div class="form-group rdc">
                                        <label class="col-sm-4 control-label">资质荣誉图：</label>
                                        <div class="col-sm-8">
                                            <div class="row">
                                                <div class="col-sm-2 divCSS">
                                                    <a href="javascript:;" class="file">选择文件 <input
                                                            type="file" ngf-select="addHonorFiles($files)"
                                                            ng-model="honorfiles" ngf-multiple="true"
                                                            name="honorfiles"></a>
                                                </div>
                                                <div class="col-sm-3 divCSS">
                                                    <small class="text-warning" style="width: 100px">*最多八张</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-if="honorPicShow.length>0"
                                         style="padding-left: 20%">
                                        <div class="pull-left" ng-repeat="item in honorPicShow"
                                             style="position:relative;padding:5px;width: 86px;height:48px;background-size:cover;">
                                            <img ng-src="{{item.location}}"
                                                 style="width:100%;height:100%"
                                                 ng-click="goPicDetail(item)" alt="" /> <i
                                                class="fa fa-times danger" aria-hidden="true"
                                                style="color:red;cursor: pointer;position:absolute;right:0;top:0"
                                                ng-click="deleteHonorPic(item)"></i>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-lg-offset-2">
                                        <div class="form-group" style="padding-left: 20%">
                                            <div class="pull-left"
                                                 ng-repeat="honorfile in totalhonorfiles"
                                                 style="position:relative;padding:5px;width: 86px;height:48px;background-size:cover;">
                                                <img ngf-src="honorfile" title="{{honorfile}}"
                                                     style="width:100%;height:100%" /> <i
                                                    class="fa fa-times danger" aria-hidden="true"
                                                    style="color:red;cursor: pointer;position:absolute;right:0;top:0"
                                                    ng-click="drophonor(honorfile)"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group rdc">
                                        <label class="col-sm-4 control-label">功能平面布置图：</label>
                                        <div class="col-sm-8">
                                            <form name="arrangeform" class="row">
                                                <div class="row">
                                                    <div class="col-sm-2 divCSS">
                                                        <a href="javascript:;" class="file">选择文件 <input
                                                                type="file" ng-model="arrangePic" name="arrangePic"
                                                                ngf-select="addArrangePic($files)">
                                                        </a>
                                                    </div>
                                                    <div class="col-sm-3 divCSS">
                                                        <small class="text-warning" style="width: 100px">*最多一张</small>
                                                    </div>
                                                    <div class="form-group col-sm-12">
                                                        <div class="pull-left"
                                                             ng-repeat="arrangePic in arrangePics"
                                                             style="position:relative;padding:5px;width: 86px;height:48px;background-size:cover;">
                                                            <img style="width: 100%;height:100%"
                                                                 ngf-src="arrangePic" title="{{arrangePic.name}}" /> <i
                                                                class="fa fa-times danger" aria-hidden="true"
                                                                style="color:red;cursor: pointer;position:absolute;right:0;top:0"
                                                                ng-click="dropArrangePic(arrangePic)"></i>
                                                        </div>
                                                    </div>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="form-group rdc" ng-if="arrangePicShow != null">
                                        <label class="col-sm-4 control-label"></label>
                                        <div class=""
                                             style="padding:5px;position:relative;display:inline-block">
                                            <img style="width: 86px;height:48px"
                                                 ng-src="{{arrangePicShow.location}}"
                                                 ng-click="goPicDetail(arrangePicShow)" alt="" /> <i
                                                class="fa fa-times danger" aria-hidden="true"
                                                style="color:red;cursor: pointer;position:absolute;right:0;top:0"
                                                ng-click="deletePic(arrangePicShow)"></i>
                                        </div>
                                    </div>

                                    <div class="form-group rdc">
                                        <label class="col-sm-4 control-label">冷库图片：</label>
                                        <div class="col-sm-8">
                                            <div class="row">
                                                <div class="col-sm-2 divCSS">
                                                    <a href="javascript:;" class="file">选择文件 <input
                                                            type="file" ngf-select="addFiles($files)"
                                                            ng-model="files" ngf-multiple="true" name="files">
                                                    </a>
                                                </div>
                                                <div class="col-sm-3 divCSS">
                                                    <small class="text-warning" style="width: 100px">*最多五张</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-if="storagePicShow.length>0"
                                         style="padding-left: 20%">
                                        <div class="pull-left" ng-repeat="item in storagePicShow"
                                             style="position:relative;padding:5px;width: 86px;height:48px;background-size:cover;">
                                            <img ng-src="{{item.location}}"
                                                 style="width:100%;height:100%"
                                                 ng-click="goPicDetail(item)" alt="" /> <i
                                                class="fa fa-times danger" aria-hidden="true"
                                                style="color:red;cursor: pointer;position:absolute;right:0;top:0"
                                                ng-click="deletePic(item)"></i>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-lg-offset-2"
                                         style="padding-left: 20%">
                                        <div class="pull-left" ng-repeat="file in totalfiles"
                                             style="position:relative;padding:5px;width: 86px;height:48px;background-size:cover;">
                                            <img ngf-src="file" style="width:100%;height:100%" alt="" />
                                            <i class="fa fa-times danger" aria-hidden="true"
                                               style="color:red;cursor: pointer;position:absolute;right:0;top:0"
                                               ng-click="drop(file)"></i>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                    </div>
                    <div class="col-lg-8 col-lg-offset-2 text-center">
                        <button class="btn btn-primary mybtn" ng-click="submit()" style="width: 150px" ng-disabled="isDisabled">提交</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="step-list">
        <div class="apply-finish text-center">
            <div class="apply-finish-header">
                <img src="assets/plugins/jquery-step/images/success.png">
                <p class="apply-finish-msg">恭喜您，提交成功！</p>
            </div>
            <div class="apply-finish-footer">
                <p>
                    尊敬的用户，您已提交成功，受理编号为<span id="proNo">LS23423432</span>。
                </p>
                <p class="btn_p"><a href="login.html" class="btn btn-success">返回登录页</a>       </p>
            </div>
        </div>
    </div>

</div>

</div>
<!-- 	<button id="preBtn">上一步</button>
	<button id="nextBtn">下一步</button>
	<button id="goBtn">跳到步</button>  -->
<script src="assets/plugins/jQuery/jQuery-2.1.4.min.js"></script>
<script src="assets/plugins/select2/select2.min.js"></script>
<script src="assets/plugins/jquery-step/js/jquery.step.js"></script>
<script type="text/javascript">

        $(".select_gallery").select2();

        var step= $("#myStep").step({
            animate:true,
            initStep:1,
            speed:1000
        });
        $(".btn_prep>button").click(function(event) {
            var yes=step.preStep();//上一步
        });

        $(".btn_p>.btn").click(function(event) {
            var yes=step.nextStep();//下一步
            $(".roleName").html("角色选择--"+$(this).html())
        });
        $(".btn_back>.btn").click(function(event) {
            var yes=step.nextStep();//上一步
        });

        $("#goBtn").click(function(event) {
            var yes=step.goStep(3);//到指定步
        });

        $("#applyBtn").click(function(event) {
            var yes=step.nextStep();

        });
        $("#submitBtn").click(function(event) {
            var yes=step.nextStep();


        });
        $("#goBtn").click(function(event) {
            var yes=step.goStep(3);

        });

    function addMore(){
        $(".moreInfo").toggle()
    }
    jQuery.ajaxSetup({xhrFields:{withCredentials:true}});
    var victdata={code:null,key:new Date().getDate()*2, userName:false,victpwd:false,victel:false,victyzm:false};
    function vsphone(telephone) {// 验证手机号码
        var length = (telephone + '').length;
        var mobile = /^1[3|4|5|7|8][0-9]\d{4,8}$/;
        return telephone && length == 11&& mobile.test(telephone);
    };

    function checkUserName(){
        var username=$("#txt_username").val().trim();
        var reg=/^[a-zA-Z0-9][a-zA-Z0-9]{5,15}$/;
        if(username&&username.length>5&&username.length<17&&reg.test(username)){
            $.post('/i/user/existenceUserName',{userName:username}, function(data){
                if(data){
                    $(".userMsg").html("用户名已存在");
                }else{
                    $(".userMsg").html("");
                    $("#submit").attr("disabled",false);
                }
                victdata.userName=data;
            });
        }else{
            victdata.userName=false;
            $("#submit").attr("disabled",true);
            $(".userMsg").html("用户名不能包含中文和特殊字符，长度在6到16位之间~");
        }

    };

    function checkcode(em) {
        victdata.victyzm = em.value.trim().length == 4 && victdata.code == em.value.trim();
        if(victdata.victyzm){
            $(".codeMsg").html("");
        }else{
            $(".codeMsg").html("验证码有误~");
        }

    }
    function getviercode(){
        if(!victdata.victel){return ;}
        $.ajax({
            type : "POST",
            /*url : "http://liankur.com/" + '/i/user/getVerCode',*/
            url : "http://localhost:8081/" + 'i/user/getVerCode',
            data : {
                key : victdata.key,
                reg : window.location.pathname,
                telephone : $("#txt_telephone").val().trim()
            },
            success : function(data) {
                alert("验证码已发送~");
                victdata.code = data;
            }
        });
    };

    //验证手机号码
    function checktelephone(){
        var telephone = $("#txt_telephone").val().trim();
        var ct = vsphone(telephone);
        if(ct){
            victdata.victel=true;
            $(".telMsg").html("");
            $('#sp_yzmbut').attr('disabled',!ct);
            $('#submit').attr("disabled",!ct);
        }else{
            victdata.victel=false;
            $(".telMsg").html("手机号不正确~");
            $('#sp_yzmbut').attr('disabled',!ct);
            $('#submit').attr("disabled",!ct);
        }
    };

    function checkpwd(){
        var password = $("#txt_password").val().trim();
        if(password == ''){
            $(".psdMsg").html("密码不能为空");
            $('#submit').attr("disabled",true);
            return false;
        }else if(password.length<6){
            $(".psdMsg").html("密码长度最少六位");
            $('#submit').attr("disabled",true);
            return false;
        }else if(password.length<=16){
            $(".psdMsg").html("");
            if (/^(\d)\1+$/.test(password)){
                $(".psdMsg").html("密码太过简单了~").css("color","#f80");
                $('#submit').attr("disabled",true);
                return false;
            }
        }else if(password.length>16){
            $(".psdMsg").html("密码长度最多16位~").css("color","#f80");
            $('#submit').attr("disabled",true);
        }else{
            $(".psdMsg").html("输入有误，请重新输入");
        }

    }

    function checkopwd(){
        var password=$("#txt_password").val().trim(), repsword=$("#txt_refpassword").val().trim();
        if(repsword.length<6){
            $(".rePsdMsg").html("再次输入的密码长度最少六位");
            $('#submit').attr("disabled",true);
            return false;
        }else{
            if(password != repsword){
                $(".rePsdMsg").html("两次密码输入不一致，请重新输入");
                $('#submit').attr("disabled",true);
                return false;
            }else{
                $(".rePsdMsg").html("");
                $('#submit').attr("disabled",false);
            }
        }
        victdata.victpwd= password.length>6&& password==repsword;
    }


    function reguser(){
        var inputArry = $("input[type='text']"),i=0,len = inputArry.length;
        for(i; i<len; i++){
            if(inputArry.eq(i).val().trim()==""){
                alert("请填写完整再注册~");
                return
            }
        }
        var me = "#submit"; if ($(me).data("isLoading") === true) { return; }
        var userMsg = $('.userMsg').html().trim(),
            psdMsg = $('.psdMsg').html().trim(),
            rePsdMsg = $('.rePsdMsg').html().trim(),
            telMsg = $('.telMsg').html().trim(),
            codeMsg = $('.codeMsg').html().trim();
        if(userMsg != ""){
            alert(userMsg);
        }else if(psdMsg != "" || rePsdMsg != ""){
            alert("密码输入不符合要求，请检查~");
        }else if(telMsg != ""){
            alert(telMsg);
        }else if(codeMsg != ""){
            alert(codeMsg);
        }else{
            $(me).text("注册中...");
            $(me).data("isLoading", true);
            if(!victdata.userName&&victdata.victpwd&&victdata.victyzm){
                $.ajax({
                    type:"POST",
                    url:"/i/user/signup",
                    data:{
                        username:$("#txt_username").val().trim(),
                        password: $("#txt_password").val().trim(),
                        telephone: $("#txt_telephone").val().trim(),
                        signUpCode:$("#txt_vicode").val().trim(),
                        type:$("input[name='coldType']:checked").val().trim(),
                    },
                    complete: function(e) {
                        $(me).text("注册");
                        $(me).delay(500).data("isLoading", false)
                    }
                }).success(function(data){
                    alert(data.message);
                    if(data.success){
                        /*window.location.href = "http://" + window.location.host + "/notAudit.html";
                         window.event.returnValue=false;*/
                        var yes=step.nextStep();//下一步
                    }
                });
            }
        }
    }
        var roleType="";
        $("p[name=chooseRole]").click(function () {
            roleType = $(this).attr("val");
            $.ajax({
                type: "POST",
                dataType: "json",
                url: "/i/loginStep/getAllRdc",
                success:function (data) {
                    var val = "";
                    for (var i=0;i<data.length;i++){
                        val+="<option value='"+data[i].id+"'>"+data[i].name+"</option>"
                    }
                    $("#rdcShow").empty().html(val);
                }
            })
        });
        $("#attestationRdc").click(function () {
            var $rdcShow = $("#rdcShow option:selected");
            $.ajax({
                type: "POST",
                data:{
                    rdcId:$rdcShow.val(),
                    roleType:roleType
                },
                dataType: "json",
                url: "/i/loginStep/attestationRdc",
                success:function (data) {

                }
            })
        });
        $("#addRdc").click(function () {
            $.ajax({
                type:"post",
                url:"http://192.168.1.196:8080/i/user/findUser",
                data:sessionStorage.sikey,
                success:function (data) {
                    /*window.location.href="http://192.168.1.114:8080/#/coldStorageAdd";*/
                }
            })
        })
</script>
</body>
</html>
