<style>
    .alert {
        padding: 8px;
    }
    .dbTable{
        padding:10px;
    }
    .dbTable table{
        background-color: #efefef;
        -webkit-border-radius:4px;
        -moz-border-radius:4px;
        border-radius:4px;
        color: #555;
    }
    .dbTable table caption{
        color: #3c8dbc;
    }
    .table>tbody>tr>td{
        border-top:1px solid #555;
        border-right:1px solid #555 ;
    }
    .table>tbody>tr>td button{
        width: 40px;
    }
    .table>tbody>tr>td:nth-child(6n+4),
    .table>tbody>tr>td:nth-child(6n+5),
    .table>tbody>tr>td:nth-child(6n+6){
        border-bottom: 1px solid #555;
    }
    .table>tbody>tr>td:nth-child(6n){
        border-right: 0;
    }
</style>
<div class="page-content">
    <div class="page-header">
        &nbsp; &nbsp;权限配置
    </div>
    <section class="content" ng-init="aclFlag=true">
        <div><ul class="nav nav-tabs"><li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                <span  ng-show="aclFlag">角色1</span><span ng-hide="aclFlag">角色2</span><b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li ng-click="accredit(1)" ng-if="!aclFlag"><a href="javascript:;">角色1</a></li>
                <li ng-click="accredit(2)" ng-if="aclFlag"><a href="javascript:;">角色2</a></li>
            </ul>
        </li>
            <li style="margin-right: 20px;"><button class="btn btn-primary" ng-click="changePwd()">修改密码</button></li>
            <li><button class="btn btn-success" ng-if="rdcConfArr!=''" ng-click="saveConf()">保存配置</button></li>
        </ul></div>
        <div class="row dbTable">
            <h1 ng-if="rdcConfArr==''">当前RDC尚未配置，请联系链库管理员对其进行配置~！</h1>
            <table ng-repeat="conf in rdcConfArr" ng-if="rdcConfArr!=''" ng-init="outerIndex=$index" class="table">
                <caption ng-if="rdcConfArr!=''">设备号：{{conf.devId}}</caption>
                <tr>
                    <td>参数名称</td>
                    <td>参数值</td>
                    <td>操作</td>
                    <td>参数名称</td>
                    <td>参数值</td>
                    <td>操作</td>
                </tr>
                <tr ng-repeat="rdcConf in conf.mapping track by $index" ng-if="$index%2==0">
                    <td>{{rdcConf.key}}</td>
                    <td>{{rdcConf.value}}</td>
                    <td><button class="btn-xs" ng-click="changeAcl(outerIndex,$index)" ng-if="!rdcConf.acl">√</button>
                        <button class="btn-xs btn-success" ng-click="changeAcl(outerIndex,$index)"  ng-if="rdcConf.acl">√</button>
                    </td>
                    <td ng-if="conf.mapping.length>$index+1">{{conf.mapping[$index+1].key}}</td>
                    <td ng-if="conf.mapping.length>$index+1">{{conf.mapping[$index+1].value}}</td>
                    <td ng-if="conf.mapping.length>$index+1">
                        <button class="btn-xs" ng-click="changeAcl(outerIndex,$index+1)" ng-if="!conf.mapping[$index+1].acl">√</button>
                        <button class="btn-xs btn-success" ng-click="changeAcl(outerIndex,$index+1)" ng-if="conf.mapping[$index+1].acl">√</button>
                    </td>
                </tr>
            </table>
        </div>
    </section>

    <div class="modal fade" id="changPwd" style="color: black" tabindex="-1" role="dialog" aria-labelledby="changPwd" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" ng-show="aclFlag">修改角色1密码</h4>
                <h4 class="modal-title" ng-hide="aclFlag">修改角色2密码</h4>
            </div>
            <div class="modal-body">

                <div class="form-group">
                    <label>新密码</label>
                    <input type="password" class="form-control" id="pwd" ng-model="pwd" placeholder="请输入新密码">
                </div>
                <div class="form-group">
                    <label>确认新密码</label>
                    <input type="password" class="form-control" id="repwd" ng-model="repwd" placeholder="请再次输入新密码">
                    <span ng-show="pwd != repwd" style="color: red">两次密码输入不一致</span>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" ng-click="submitChangePwd()">提交更改</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
</div>
