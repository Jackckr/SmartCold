<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smartcold.manage.cold.dao.newdb.QuantityMapper">



	<select id="findForkliftByTime" resultType="ForkLiftEntity">
		SELECT oid ,SUM(`value`)power  FROM `forklift` where `oid` in(${oid}) and (`addtime` between  #{stTime} and #{edTime})  ;
	</select>
	
	
	
	
	<select id="getTaskStatus" resultType="boolean">
		select if(TIMESTAMPDIFF(MINUTE,sk.LastRunTim,#{time})>intervalTime,1,0) isRuan from queue_task sk  where sk.methodName=#{methodName} for update;
	</select>
	<update id="updateTakststatus" parameterType="String">
	    update queue_task set state=#{state} WHERE key=#{key};
	</update>
	
	<select id="getTaskByIP" parameterType="map" resultType="ForkLiftEntity">
		select id,state,intervalTime, LastRunTim,updateTime from queue_task t where ip=#{ip};
	</select>
	
	
</mapper>