<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>链库-注册</title>
    <meta charset="utf-8" name="keywords" content="链库,冷链物流,冷库360,冷库监控,冷库智能管理,冷库能效评估"/>
    <meta charset="utf-8" name="description" content="冷库智能管理与云服务平台。国内最大、最权威的冷库信息平台，以及冷库管理可视化与能效在线评估系统。"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"/>
    <link rel="shortcut icon" href="../img/favicon.ico" />
    <!--引入样式包-->
    <link rel="stylesheet" href="../plugins/css/layui.css" />
    <link rel="stylesheet" href="../css/common.css" />
    <link rel="stylesheet" href="../css/media.css" />
    <link rel="stylesheet" href="../css/login.css" />
</head>
<body>
<!--header 导航栏-->
<div class="header">
    <div class="hotLine">
        <h2 class="fl">全国最大的冷库数据与交易平台</h2>
        <div class="fr">
            <span>客服热线：<span class="orange">400-853-5606</span></span>
            <a href="#QRcode">
                APP下载<i class="iconfont orange">&#xe642;</i>
            </a>
        </div>
    </div>
    <div class="nav">
        <h1 class="fl"><a href="../../index.htm" target="_blank">找冷库&nbsp;&nbsp;上链库</a></h1>
        <ul id="noLoginUser" class="fr navLogin">
            <li><a href="login.html"><i class="iconfont">&#xe715;</i>&nbsp;登录</a></li>
            <li><a href="register.html"><i class="iconfont">&#xe60f;</i>&nbsp;注册</a></li>
        </ul>
        <div id="loginUser" class="fr">
            <div class="nameDiv">
                <img src="">
            </div>
            <dl class="hide">
                <li><a href="usercenter.html">个人中心</a></li>
                <li><a onclick="logout()">退出</a></li>
            </dl>
        </div>
        <div class="navSmall fr"><!--小屏幕显示-->
            <span><i class="iconfont">&#xe62d;</i></span>
            <ul class="navUlList">
                <li><a href="../../index.htm">首　　页</a></li>
                <li><a href="rdclist.html">冷库商情</a></li>
                <li><a href="rdcprice.html">冷库价格</a></li>
                <li><a href="rdcmatch.html">需求匹配</a></li>
                <li><a href="rdctrace.html">温度追溯</a></li>
                <li><a href="http://www.smartcold.org.cn/">冷库360</a></li>
                <li><a href="rdccooperation.html">企业专区</a></li>
            </ul>
        </div>
        <ul class="fr navUl">
            <li><a href="../../index.htm">首　　页</a></li>
            <li><a href="rdclist.html">冷库商情</a></li>
            <li><a href="rdcprice.html">冷库价格</a></li>
            <li><a href="rdcmatch.html">需求匹配</a></li>
            <li><a href="rdctrace.html">温度追溯</a></li>
            <li><a href="http://www.smartcold.org.cn/">冷库360</a></li>
            <li><a href="rdccooperation.html">企业专区</a></li>
        </ul>
    </div>
</div>
<div class="section loginStyle">
    <div class="loginDiv clearfix">
        <div class="loginBg"></div>

        <div class="login">
            <h2>用户注册</h2>
            <form class="layui-form layui-form-pane" action="" onsubmit="return false">
                <div class="layui-form-item">
                    <label class="layui-form-label"><i class="iconfont">&#xe63d;</i></label>
                    <div class="layui-input-block">
                        <input type="text" name="username" id="username" lay-verify="userName" autocomplete="off" placeholder="请输入用户名" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                   <div class="fl" style="width:280px;">
                       <label class="layui-form-label"><i class="iconfont">&#xe640;</i></label>
                       <div class="layui-input-block">
                           <input type="text" id="verifyCode" name="telephone" lay-verify="phone" maxlength="11" autocomplete="off" placeholder="请输入手机号" class="layui-input">
                       </div>
                   </div>
                    <button class="layui-btn fr layui-btn-primary" style="width: auto" id="getCode">获取验证码</button>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label"><i class="iconfont">&#xe641;</i></label>
                    <div class="layui-input-block">
                        <input type="text" name="signUpCode" lay-verify="verifyCode" autocomplete="off" maxlength="4" placeholder="请输入验证码" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label"><i class="iconfont">&#xe69c;</i></label>
                    <div class="layui-input-block">
                        <input type="password" name="password" lay-verify="pass" placeholder="请输入密码" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item" style="margin: 0;">
                    <label class="layui-form-label"><i class="iconfont">&#xe69c;</i></label>
                    <div class="layui-input-block">
                        <input type="password" name="password1" lay-verify="pass" placeholder="请再次输入密码" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item" style="margin-top: 10px;">
                    <div class="fl">
                        <input type="checkbox" id="agreement" name="readOk" title="阅读并同意" checked>
                        <a id="regAgreement" target="_blank" href="announcement.html">《链库使用协议》</a>
                    </div>
                    <div class="layui-form-mid layui-word-aux fr">
                        <a href="login.html">登录</a>
                    </div>
                </div>
                <div class="layui-form-item btnSubmit">
                    <button class="layui-btn" lay-submit="lianku" lay-filter="lianku">注册</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!--版权区域-->
<div class="footer" id="QRcode">
    <dl class="clearfix">
        <li class="fl">
            <p><a href="aboutlianku.html">关于我们</a></p>
            <p>©2016 Smartcold    沪ICP备 16004753</p>
            <p>为了您可以获取更佳的浏览效果</p>
            <p>本站推荐使用
                <a href="http://sw.bos.baidu.com/sw-search-sp/software/ba34c905dbdd4/ChromeStandalone_57.0.2987.98_Setup.exe">谷歌浏览器
                </a>、<a href="http://sw.bos.baidu.com/sw-search-sp/software/4cee66da4242e/Firefox_52.0.1.6284_setup.exe">火狐浏览器
                </a>或者<a href="http://down.360safe.com/se/360se8.1.1.250.exe">360浏览器极速模式</a>
            </p>
        </li>
        <li class="fr">
            <div class="codeImg">
                <img src="../img/ios.png" alt="开小差了~~~">
                <p>iPhone下载</p>
            </div>
            <div class="codeImg">

                <img src="../img/android.png" alt="开小差了~~~">
                <p>Android下载</p>
            </div>
            <div class="codeImg">
                <img src="../img/weixin_lianku.jpg" alt="开小差了~~~">
                <p>链库公众号</p>
            </div>
        </li>
    </dl>
</div>
<script src="../plugins/jquery-1.12.0.min.js"></script>
<script src="../plugins/layui.all.js"></script>
<script src="../js/common.js"></script>
<script>
    var phoneReg=/^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/;
    function userNameExist(value) {//用户名检查
        $.post('/i/user/userNameVerify',{
            username:value
        }, function(data){
            if(!data){
                layer.tips('用户名已存在', '#username', {
                    tips: [1, '#0FA6D8'] //还可配置颜色
                });
                return false
            }
        });
    }
    $("#getCode").click(function(){//发送验证码
        if(phoneReg.test($('input[name=telephone]').val().trim())){
            $('input[name=telephone]').addClass('layui-disabled').attr('readonly','readonly');
            $(this).addClass('layui-disabled').attr('disabled','disabled');
            $.post('/i/user/telephoneVerify',{
                telephone:$('input[name=telephone]').val().trim()
            }, function(data){
                layer.tips(data.message, '#verifyCode', {
                    tips: [1, '#0FA6D8'] //还可配置颜色
                });
            });
        }else{
            layer.tips('请输入正确的手机号', '#verifyCode', {
                tips: [1, '#0FA6D8'] //还可配置颜色
            });
        }


    });
    layui.use(['form'], function(){
        var form = layui.form(),layer = layui.layer;
        //自定义验证规则
        form.verify({
            userName: function(value, item){ //value：表单的值、item：表单的DOM对象
                if(!new RegExp("^[a-zA-Z0-9_\u4e00-\u9fa5\\s·]+$").test(value)){
                    return '用户名不能为空并且不能有特殊字符';
                }
                if(!/^[a-zA-Z0-9][a-zA-Z0-9]{2,15}$/.test(value)){
                    return '用户名不能包含中文和特殊字符，长度不得低于3位~'
                }
                if(/(^\_)|(\__)|(\_+$)/.test(value)){
                    return '用户名首尾不能出现下划线\'_\'';
                }
                if(value.length>24){
                    return '用户名长度不能超过24位';
                }
                userNameExist(value)//检查用户名重复hh
            }
            //我们既支持上述函数式的方式，也支持下述数组的形式
            //数组的两个值分别代表：[正则匹配、匹配不符时的提示文字]
            ,pass: [
                /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{5,15}$/
                ,'密码必须6~16位，并且是数字字母组合'
            ],
            phone:[
                phoneReg,
                '手机号格式不正确'
            ],
            verifyCode:[
                /^\d+\d+\d$/,
                '验证码必须是数字'
            ]
        });
        //监听提交
        form.on('submit(lianku)', function(data){
            if(data.field.password!=data.field.password1){
                layer.alert("两次密码不一致", {icon:5});
                return false
            }else if($('#agreement').is(':checked')==false){
                layer.alert('请确认您已同意链库使用协议', {icon:6});
                return false
            }
            $.ajax({
                type: "POST",
                async: false,
                dataType: "json",
                url: "/i/user/signup?",
                data: data.field,
                success: function (data) {
                    layer.alert(data.message, {icon:6});//1:对号，2:叉号，3：问号，4：锁，5：哭脸，6：笑脸，7：叹号
                    if(data.status == "0"){
                        window.location.href = "http://" + window.location.host + "/view/html/login.html";
                        window.event.returnValue=false;
                    }
                },
                error:function(){
                    layer.alert("系统错误", {icon:5});
                }
            });
        });
    });

</script>
</body>
</html>