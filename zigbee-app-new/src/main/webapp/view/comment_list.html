<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>所有评论</title>
        <meta charset="utf-8" name="keywords" content="链库,链库网,冷库360,冷库,冷链,智慧冷库,冷库节能,冷库监控,冷库智能管理,冷库能效评估,温度追溯,冷链物流,冷链电商"/>
        <meta charset="utf-8" name="description" content="冷库智能管理与云服务平台。国内最大、最权威的冷库信息平台，以及冷库管理可视化与能效在线评估系统。"/>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1">
        <link rel="stylesheet" type="text/css" href="../com/css/common.css">
	    <link rel="stylesheet" type="text/css" href="../com/css/layer.css">
        <link rel="stylesheet" type="text/css" href="../com/css/baguettebox.min.css">     
        <link rel="stylesheet" type="text/css" href="../com/css/coldlist.css" />
       	    <script type="text/javascript" src="../com/js/jquery-1.12.0.min.js"></script>
	    <script type="text/javascript" src="../com/js/angular.min.js"></script>
		<script type="text/javascript" src="../com/js/common.js"></script>
        <script type="text/javascript" src="../com/js/layer.js"></script>
	    <script type="text/javascript" src="../com/js/baguettebox.min.js"></script>
		<script type="text/javascript">
            var id  = getUrlParam("id");//当前rdc-id数据信息
            var app = angular.module('app', []);
            app.controller('commentList', function($http, $location,$scope) {
                $scope.rdcid=id;
                $http.defaults.withCredentials=true;$http.defaults.headers={'Content-Type': 'application/x-www-form-urlencoded'};

                $http.get(ER.root + "/i/comment/findCommentsByRDCId", {params: {npoint:200,rdcID:id}}).success(function(data) {//评价信息--npoint：记录条数
                    $scope.evaList = data;//
                    $scope.evatotal = data.length;//
                });
                $scope.initevg=function(){
                    baguetteBox.run('.baguetteBoxOne', {animation: 'slideIn', buttons: true});
                };
                $scope.initevg();
                $scope.$on('ngRepeatFinished', function (ngRepeatFinishedEvent) {baguetteBox.run('.baguetteBoxOne', {buttons:true});imgBoxHide()});
            });
            app.directive('onFinishRenderFilters', function ($timeout) { return { restrict: 'A', link: function(scope, element, attr) {   $timeout(function() { scope.$emit('ngRepeatFinished');  },100); } };});
        </script>
    </head>
    <body ng-app="app"  ng-controller="commentList"  on-finish-render-filters>
        <!-- header -->
            <header>                 
                <div class="area fl"> <a  onclick="goback();"><i class="iconfont">&#xe60e;</i></a></div>
                <div class="zoom fr"> <a href="../index.html"> <i class="iconfont">&#xe65a;</i> </a></div>
                <div class="txt">所有评论</div>
            </header>
        <!-- header end-->       
        <section class="more" style="margin-top:2.5rem;" ng-if="evatotal">
<!--         	<div class="commentFix">立即评价</div> -->
             <ul class="borderlist clearfix" >
                <li><span>全部</span>&nbsp;(<span id="num">{{evaList.length}}</span>)</li>
             </ul>
             <!--具体评论区域-->
             <ul class="commentArea" ng-repeat="eva in evaList">
                <li class="fl" >
                    <img ng-src="{{eva.avatar}}" alt="" />
                </li>
                <li>
                    <p class='ellipsis' title="{{eva.nickname}}">{{(eva.nickname.trim()==undefined || eva.nickname.trim()=="")?eva.commerName:eva.nickname}}</p>
                    <div class="equal clearfix">
                        <ul class='star fl'>
                            <li class="{{eva.grade>=1?'filled':''}}">★</li><li class="{{eva.grade>=2?'filled':''}}">★</li><li class="{{eva.grade>=3?'filled':''}}">★</li><li class="{{eva.grade>=4?'filled':''}}">★</li><li class="{{eva.grade>=5?'filled':''}}">★</li>
                        </ul>                        
                        <span class="fr">{{eva.addTime}}</span>
                    </div>
                    <p class="commentTxt">{{eva.content}}</p>
                    <div class="baguetteBoxOne gallery"  ng-if="eva.reviewPics.length>0">
                        <a  ng-repeat="fl in eva.reviewPics" href="{{fl.location}}" data-caption="{{($index+1)+'/'+eva.reviewPics.length}}" ><img ng-src="{{fl.location}}" alt="" /></a>
                    </div>
                </li>
             </ul>
        </section>
        
    </body>
</html>
