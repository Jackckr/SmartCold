<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.smartcold.bgzigbee.manage.dao.BlowerSetMapper">

    <select id="findByStorageId" parameterType="map" resultType="com.smartcold.bgzigbee.manage.entity.BlowerSetEntity">
		SELECT *
		FROM `BlowerSet` WHERE `coldStorageId` = #{coldStorageId}
	</select>
	
	<update id="updateMappingById" parameterType="map">
	    UPDATE `BlowerSet` SET mapping=#{mapping}
	    WHERE `id` = #{id}
	</update>
	<update id="updateBlower" parameterType="map">
	    UPDATE `BlowerSet` 
	   <set >
			<if test="blowerId                !=0">blowerId               =#{blowerId               },</if>
			<if test="compressorGroupId       !=0">compressorGroupId      =#{compressorGroupId      },</if>
			<if test="coldStorageId           !=0">coldStorageId          =#{coldStorageId          },</if>
			<if test="defrostingTemperature   !=0">defrostingTemperature  =#{defrostingTemperature  },</if>
			<if test="mapping                 !=null">mapping                =#{mapping                },</if>
			<if test="name                    !=null">name                   =#{name                   },</if>
			<if test="power                   !=0">power                  =#{power                  },</if>
			<if test="fanPower                !=0">fanPower               =#{fanPower               },</if>
			<if test="frostPower              !=0">frostPower             =#{frostPower             }</if>
        </set>
	    WHERE `id` = #{id}
	</update>
	
	<insert id="insertBlower">
	    INSERT INTO `blowerset` 
	    (
	    `name`, 
	    `blowerId`, 
	    `power`, 
	    `fanPower`, 
	    `frostPower`, 
	    `compressorGroupId`, 
	    `coldStorageId`, 
	    `defrostingTemperature`
	    )
	    VALUES
	    (
	    #{name},
	    #{blowerId}, 
	    #{power     },
	    #{fanPower  },
	    #{frostPower},
	    #{compressorGroupId}, 
	    #{coldStorageId},
	    #{defrostingTemperature}
	    )
	    
	</insert>

    <delete id="deleteBlower" parameterType="map">
        DELETE FROM `blowerset`
        WHERE `id` = #{id}
    </delete>
</mapper>