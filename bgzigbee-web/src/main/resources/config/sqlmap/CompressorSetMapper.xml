<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.smartcold.bgzigbee.manage.dao.CompressorSetMapper">
	<insert id="insert">
		INSERT INTO `compressorset` (`compressorgroupid`, `name`,`power`, `waterRatio`,`type`,`lastMaintainTime`,`maintenancetime`)
		VALUES (#{compressorgroupid}, #{name}, #{power}, #{waterRatio},#{type},now() ,#{maintenancetime})
	</insert>
	<update id="updateById">
		UPDATE `compressorset` 
		<set>
		<if test=" name             !=null and name!=''">`name` = #{name},</if>
		<if test=" power            !=null and power!=0">`power` = #{power},                        </if>
		<if test=" waterRatio      !=null and waterRatio!=0">`waterRatio` = #{waterRatio},              </if>
		<if test=" maintenancetime  !=null and maintenancetime!=0 ">`maintenancetime` =#{maintenancetime},     </if>
		<if test=" lastMaintainTime !=null and lastMaintainTime!=''">`lastMaintainTime` =#{lastMaintainTime},     </if>
		<if test=" type             !=null and type!=0">`type` = #{type}                           </if>
		</set>
		WHERE `id` = #{id}
	</update>
	<delete id="deleteById">
		DELETE FROM `compressorset` WHERE `id` = #{id}
	</delete>


	<select id="findById" parameterType="map" resultType="com.smartcold.bgzigbee.manage.entity.CompressorSetEntity">
		SELECT *
		FROM `compressorset` WHERE `id` = #{id}
	</select>
	
	<select id="findCompressorByGroupid" parameterType="map" resultType="com.smartcold.bgzigbee.manage.entity.CompressorSetEntity">
		SELECT *
		FROM `compressorset` WHERE `compressorgroupid` = #{groupId}
	</select>

</mapper>