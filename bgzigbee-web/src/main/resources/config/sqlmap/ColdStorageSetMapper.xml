<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.smartcold.bgzigbee.manage.dao.ColdStorageSetMapper">

    <select id="findLastNPoint" parameterType="map" resultType="com.smartcold.bgzigbee.manage.entity.ColdStorageSetEntity">
        SELECT *
        FROM `ColdStorageSet` WHERE `coldStorageID` = #{storageID} limit #{npoint}
    </select>

    <select id="findByRdcId" parameterType="map" resultType="com.smartcold.bgzigbee.manage.entity.ColdStorageSetEntity">
        SELECT *
        FROM `ColdStorageSet` WHERE `rdcId` = #{rdcId}
    </select>
    
    <update id="updateMappingById" parameterType="map">
		UPDATE `ColdStorageSet` SET mapping=#{mapping}
		WHERE `id` = #{coldStorageId}
	</update>
	<update id="update">
		UPDATE `coldstorageset` SET
			`name`=#{name},
			`startTemperature`=#{startTemperature},
			`energyCost` = #{energyCost},
	    	`longitude`=#{longitude},
	   	 	`latitude`=#{latitude},
	    	`location`= #{location},
	    	`tempdiff`= #{tempdiff},
	    	`overtempalarm`= #{overtempalarm},
	    	`overtempdelay`= #{overtempdelay}
		WHERE id=#{id}
	</update>

	<insert id="insertColdStorage" parameterType="com.smartcold.bgzigbee.manage.entity.ColdStorageSetEntity">
	INSERT INTO `coldstorageset`
	(
	`RDCID`,
	`name`,
	`startTemperature`,
	`energyCost`,
	`longitude`,
	`latitude`,
	`location`,
	`tempdiff`,
	`overtempalarm`,
	`overtempdelay`,
	`length`,
	`width`,
	`height`,
	`inhumidity`,
	`outhumidity`,
	`intempe`,
	`outtempe`
	)
	VALUES
	(
	#{rdcId},
	#{name},
	#{startTemperature},
	#{energyCost},
	#{longitude},
	#{latitude},
	#{location},
	#{tempdiff},
	#{overtempalarm},
	#{overtempdelay},
	#{length },
	#{width },
	#{height },
	#{inhumidity },
	#{outhumidity },
	#{intempe },
	#{outtempe}
	)
	</insert>
	
	<delete id="deleteColdStorage" parameterType="map">
	    DELETE FROM `coldstorageset`
	    WHERE `id` = #{id}
	</delete>

</mapper>